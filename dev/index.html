
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Introduction &#8212; pytest-order 1.0.dev0 documentation</title>
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="nav-item nav-item-0"><a href="#">pytest-order 1.0.dev0 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="introduction">
<h1>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">pytest-order</span></code> is a pytest plugin which allows you to customize the order
in which your tests are run. It provides the marker <code class="docutils literal notranslate"><span class="pre">order</span></code>, that has
attributes that define when your tests should run in relation to each other.
These attributes can be absolute (i.e. first, or second-to-last) or relative
(i.e. run this test before this other test).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It is generally considered bad practice to write tests that depend on each
other. However, in reality this may still be needed due to performance
issues, legacy code or other constraints. Still, before using this plugin,
you should check if you can refactor your tests to remove the dependencies
between tests.</p>
</div>
<div class="section" id="relationship-with-pytest-ordering">
<h2>Relationship with pytest-ordering<a class="headerlink" href="#relationship-with-pytest-ordering" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">pytest-order</span></code> is a fork of
<a class="reference external" href="https://github.com/ftobia/pytest-ordering">pytest-ordering</a>, which is
not maintained anymore. The idea and most of the code has been created by
Frank Tobia, the author of that plugin, and contributors to the project.</p>
<p>However, <code class="docutils literal notranslate"><span class="pre">pytest-order</span></code> is not compatible with <code class="docutils literal notranslate"><span class="pre">pytest-ordering</span></code> due to the
changed marker name (<code class="docutils literal notranslate"><span class="pre">order</span></code> instead of <code class="docutils literal notranslate"><span class="pre">run</span></code>) and the removal of all
other special markers for consistence (as has been discussed in
<a class="reference external" href="https://github.com/ftobia/pytest-ordering/issues/38">this issue</a>). This
also avoids clashes between the plugins if they are both installed.</p>
<p>Here are examples for which markers correspond to markers in
<code class="docutils literal notranslate"><span class="pre">pytest-ordering</span></code>:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">pytest.mark.order1</span></code>, <code class="docutils literal notranslate"><span class="pre">pytest.mark.run(order=1)</span></code> =&gt; <code class="docutils literal notranslate"><span class="pre">pytest.mark.order(1)</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">pytest.mark.first</span></code> =&gt; <code class="docutils literal notranslate"><span class="pre">pytest.mark.order(&quot;first&quot;)</span></code></li>
</ul>
<p>Additionally, <code class="docutils literal notranslate"><span class="pre">pytest-order</span></code> provides a number of features (relative
ordering, all configuration options) that are not available in
<code class="docutils literal notranslate"><span class="pre">pytest-ordering</span></code>.</p>
</div>
<div class="section" id="supported-python-and-pytest-versions">
<h2>Supported Python and pytest versions<a class="headerlink" href="#supported-python-and-pytest-versions" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">pytest-order</span></code> supports python 2.7, 3.5 - 3.10, and pypy/pypy3, and is
compatible with pytest 3.7.0 or newer. Note that support for Python 2 will
be removed in one of the next versions.</p>
<p>All supported combinations of Python and pytest versions are tested in
the CI builds. The plugin shall work under Linux, MacOs and Windows.</p>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>The latest released version can be installed from
<a class="reference external" href="https://pypi.python.org/pypi/pytest-order/">PyPi</a>:</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">pytest</span><span class="o">-</span><span class="n">order</span>
</pre></div>
</div>
<p>The latest main branch can be installed from the GitHub sources:</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">git</span><span class="o">+</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">pytest</span><span class="o">-</span><span class="n">dev</span><span class="o">/</span><span class="n">pytest</span><span class="o">-</span><span class="n">order</span>
</pre></div>
</div>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p>Most examples shown in this documentation can be also found in the repository
under <a class="reference external" href="https://github.com/pytest-dev/pytest-order/tree/main/example/">example</a>
as working test files.</p>
</div>
<div class="section" id="quickstart">
<h2>Quickstart<a class="headerlink" href="#quickstart" title="Permalink to this headline">¶</a></h2>
<p>Ordinarily pytest will run tests in the order that they appear in a module.
For example, for the following tests:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_foo</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>

<span class="k">def</span> <span class="nf">test_bar</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>
</pre></div>
</div>
<p>the output is something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pytest test_foo.py -vv
============================= test session starts ==============================
platform darwin -- Python 3.7.1, pytest-5.4.3, py-1.8.1, pluggy-0.13.1 -- env/bin/python
collected 2 items

test_foo.py:2: test_foo PASSED
test_foo.py:6: test_bar PASSED

=========================== 2 passed in 0.01 seconds ===========================
</pre></div>
</div>
<p>With <code class="docutils literal notranslate"><span class="pre">pytest-order</span></code>, you can change the default ordering as follows:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">order</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_foo</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">order</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_bar</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>
</pre></div>
</div>
<p>This will generate the output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pytest test_foo.py -vv
============================= test session starts ==============================
platform darwin -- Python 3.7.1, pytest-5.4.3, py-1.8.1, pluggy-0.13.1 -- env/bin/python
plugins: order
collected 2 items

test_foo.py:7: test_bar PASSED
test_foo.py:3: test_foo PASSED

=========================== 2 passed in 0.01 seconds ===========================
</pre></div>
</div>
</div>
</div>
<div class="section" id="usage">
<h1>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h1>
<p>The above is a trivial example, but ordering is respected across test files.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The scope of the ordering is global per default, e.g. tests with lower
ordinal numbers are always executed before tests with higher numbers in
the same test session, regardless of the module and class they reside in.
This can be changed by using the <a class="reference internal" href="#order-scope"><span class="std std-ref">--order-scope</span></a> option.</p>
</div>
<p>Ordering is done either absolutely, by using ordinal numbers that define the
order, or relative to other tests, using the <code class="docutils literal notranslate"><span class="pre">before</span></code> and <code class="docutils literal notranslate"><span class="pre">after</span></code>
attributes of the marker.</p>
<div class="section" id="ordering-by-numbers">
<h2>Ordering by numbers<a class="headerlink" href="#ordering-by-numbers" title="Permalink to this headline">¶</a></h2>
<p>The order can be defined by ordinal numbers, or by ordinal strings.</p>
<div class="section" id="order-by-index">
<h3>Order by index<a class="headerlink" href="#order-by-index" title="Permalink to this headline">¶</a></h3>
<p>As already shown above, the order can be defined using ordinal numbers.
There is a long form that uses the keyword <code class="docutils literal notranslate"><span class="pre">index</span></code>, and a short form, that
uses just the ordinal number–both are shown in the example below. The long
form may be better readable if you want to combine it with a dependency marker
(<code class="docutils literal notranslate"><span class="pre">before</span></code> or <code class="docutils literal notranslate"><span class="pre">after</span></code>, see below).
Negative numbers are also allowed–they are used the same way as indices
are used in Python lists, e.g. to count from the end:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">order</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_three</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">order</span><span class="p">(</span><span class="n">index</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_four</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">order</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_two</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">order</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_one</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pytest test_foo.py -vv
============================= test session starts ==============================
platform darwin -- Python 3.7.1, pytest-5.4.3, py-1.8.1, pluggy-0.13.1 -- env/bin/python
plugins: order
collected 4 items

test_foo.py:17: test_one PASSED
test_foo.py:12: test_two PASSED
test_foo.py:3: test_three PASSED
test_foo.py:7: test_four PASSED

=========================== 4 passed in 0.02 seconds ===========================
</pre></div>
</div>
<p>There is no limit for the numbers that can be used in this way.</p>
</div>
<div class="section" id="order-using-ordinals">
<h3>Order using ordinals<a class="headerlink" href="#order-using-ordinals" title="Permalink to this headline">¶</a></h3>
<p>Instead of the numbers, you can use ordinal names such as “first”, “second”,
“last”, and “second_to_last”. These are convenience notations, and have the
same effect as the numbers 0, 1, -1 and -2, respectively, that have been shown
above:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">order</span><span class="p">(</span><span class="s2">&quot;second_to_last&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_three</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">order</span><span class="p">(</span><span class="s2">&quot;last&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_four</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">order</span><span class="p">(</span><span class="s2">&quot;second&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_two</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">order</span><span class="p">(</span><span class="s2">&quot;first&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_one</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pytest test_foo.py -vv
============================= test session starts ==============================
platform darwin -- Python 3.7.1, pytest-5.4.3, py-1.8.1, pluggy-0.13.1 -- env/bin/python
plugins: order
collected 4 items

test_foo.py:17: test_one PASSED
test_foo.py:12: test_two PASSED
test_foo.py:3: test_three PASSED
test_foo.py:7: test_four PASSED

=========================== 4 passed in 0.02 seconds ===========================
</pre></div>
</div>
<p>Convenience names are only defined for the first and the last 8 numbers.
Here is the complete list with the corresponding numbers:</p>
<ul class="simple">
<li>“first”: 0</li>
<li>“second”: 1</li>
<li>“third”: 2</li>
<li>“fourth”: 3</li>
<li>“fifth”: 4</li>
<li>“sixth”: 5</li>
<li>“seventh”: 6</li>
<li>“eighth”: 7</li>
<li>“last”: -1</li>
<li>“second_to_last”: -2</li>
<li>“third_to_last”: -3</li>
<li>“fourth_to_last”: -4</li>
<li>“fifth_to_last”: -5</li>
<li>“sixth_to_last”: -6</li>
<li>“seventh_to_last”: -7</li>
<li>“eighth_to_last”: -8</li>
</ul>
</div>
<div class="section" id="markers-on-class-level">
<h3>Markers on class level<a class="headerlink" href="#markers-on-class-level" title="Permalink to this headline">¶</a></h3>
<p>If setting an <code class="docutils literal notranslate"><span class="pre">order</span></code> mark on class level, all tests in this class will be
handled as having the same ordinal marker, e.g. the class as a whole will be
reordered without changing the test order inside the test class:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">order</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">Test1</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">test_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">assert</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">test_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">assert</span> <span class="kc">True</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">order</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">Test2</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">test_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">assert</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">test_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">assert</span> <span class="kc">True</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pytest -vv test_ordinal_class_mark.py
============================= test session starts ==============================
...
collected 4 items

test_ordinal_class_mark.py::Test2::test_1 PASSED
test_ordinal_class_mark.py::Test2::test_2 PASSED
test_ordinal_class_mark.py::Test1::test_1 PASSED
test_ordinal_class_mark.py::Test1::test_2 PASSED
</pre></div>
</div>
</div>
<div class="section" id="handling-of-unordered-tests">
<h3>Handling of unordered tests<a class="headerlink" href="#handling-of-unordered-tests" title="Permalink to this headline">¶</a></h3>
<p>By default, tests with no <code class="docutils literal notranslate"><span class="pre">order</span></code> mark are executed after all tests with
positive ordinal numbers (or the respective names), and before tests with
negative ordinal numbers. The order of these tests in relationship to each
other is not changed. This behavior will slightly change if the option
<a class="reference internal" href="#sparse-ordering"><span class="std std-ref">--sparse-ordering</span></a> is used and the ordinals are not contiguous.</p>
</div>
</div>
<div class="section" id="order-relative-to-other-tests">
<h2>Order relative to other tests<a class="headerlink" href="#order-relative-to-other-tests" title="Permalink to this headline">¶</a></h2>
<p>The test order can be defined relative to other tests, which are referenced
by their name. The marker attributes <code class="docutils literal notranslate"><span class="pre">before</span></code> and <code class="docutils literal notranslate"><span class="pre">after</span></code> can be used to
define the order relative to these tests:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">order</span><span class="p">(</span><span class="n">after</span><span class="o">=</span><span class="s2">&quot;test_second&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_third</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>

<span class="k">def</span> <span class="nf">test_second</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">order</span><span class="p">(</span><span class="n">before</span><span class="o">=</span><span class="s2">&quot;test_second&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_first</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pytest test_foo.py -vv
============================= test session starts ==============================
platform darwin -- Python 3.7.1, pytest-5.4.3, py-1.8.1, pluggy-0.13.1 -- env/bin/python
plugins: order
collected 3 items

test_foo.py:11: test_first PASSED
test_foo.py:7: test_second PASSED
test_foo.py:4: test_third PASSED

=========================== 4 passed in 0.02 seconds ===========================
</pre></div>
</div>
<div class="section" id="referencing-of-tests-in-other-classes-or-modules">
<h3>Referencing of tests in other classes or modules<a class="headerlink" href="#referencing-of-tests-in-other-classes-or-modules" title="Permalink to this headline">¶</a></h3>
<p>If a test is referenced using the unqualified test name as shown in the
example above, the test is assumed to be in the current module and the current
class, if any. For tests in other classes in the same module the class name
with a <code class="docutils literal notranslate"><span class="pre">::</span></code> suffix has to be prepended to the test name:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>

<span class="k">class</span> <span class="nc">TestA</span><span class="p">:</span>
    <span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">order</span><span class="p">(</span><span class="n">after</span><span class="o">=</span><span class="s2">&quot;TestB::test_c&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_a</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">assert</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">test_b</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">assert</span> <span class="kc">True</span>

<span class="k">class</span> <span class="nc">TestB</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">test_c</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">assert</span> <span class="kc">True</span>
</pre></div>
</div>
<p>If the referenced test lives in another module, the test name has to be
prepended by the module path to be uniquely identifiable. Let’s say we have
the following module and test layout:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">test_module_a</span><span class="o">.</span><span class="n">py</span>
    <span class="n">TestA</span>
        <span class="n">test_a</span>
        <span class="n">test_b</span>
<span class="n">test_module_b</span><span class="o">.</span><span class="n">py</span>
    <span class="n">test_a</span>
    <span class="n">test_b</span>
<span class="n">test_module_c</span>
    <span class="n">test_submodule</span><span class="o">.</span><span class="n">py</span>
        <span class="n">test_1</span>
        <span class="n">test_2</span>
</pre></div>
</div>
<p>Suppose the tests in <code class="docutils literal notranslate"><span class="pre">test_module_b</span></code> shall depend on tests in the other
modules, this could be expressed like:</p>
<p><strong>test_module_b.py</strong></p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">order</span><span class="p">(</span><span class="n">after</span><span class="o">=</span><span class="s2">&quot;test_module_a.TestA::test_a&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_a</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">order</span><span class="p">(</span><span class="n">before</span><span class="o">=</span><span class="s2">&quot;test_module_c.test_submodule.test_2&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_b</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>
</pre></div>
</div>
<p>If an unknown test is referenced, a warning is issued and the execution
order of the test in is not changed.</p>
</div>
<div class="section" id="id1">
<h3>Markers on class level<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>As for ordinal markers, markers on class level are handled as if they are set
to each individual test in the class. Additionally to referencing single
tests, you can also reference test classes if using the <code class="docutils literal notranslate"><span class="pre">before</span></code> or
<code class="docutils literal notranslate"><span class="pre">after</span></code> marker attributes:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">order</span><span class="p">(</span><span class="n">after</span><span class="o">=</span><span class="s2">&quot;Test2&quot;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">Test1</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">test_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">assert</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">test_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">assert</span> <span class="kc">True</span>

<span class="k">class</span> <span class="nc">Test2</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">test_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">assert</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">test_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">assert</span> <span class="kc">True</span>
</pre></div>
</div>
<p>In this case, the tests in the marked class will be ordered behind all tests
in the referenced class:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pytest -vv test_relative_class_mark.py
============================= test session starts ==============================
...
collected 4 items

test_relative_class_marker.py::Test2::test_1 PASSED
test_relative_class_marker.py::Test2::test_2 PASSED
test_relative_class_marker.py::Test1::test_1 PASSED
test_relative_class_marker.py::Test1::test_2 PASSED
</pre></div>
</div>
</div>
<div class="section" id="combination-of-absolute-and-relative-ordering">
<h3>Combination of absolute and relative ordering<a class="headerlink" href="#combination-of-absolute-and-relative-ordering" title="Permalink to this headline">¶</a></h3>
<p>If you combine absolute and relative order markers, the ordering is first done
for the absolute markers (e.g. the ordinals), and afterwards for the relative
ones. This means that relative ordering always takes preference:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">order</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">after</span><span class="o">=</span><span class="s2">&quot;test_second&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_first</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">order</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_second</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>
</pre></div>
</div>
<p>In this case, <code class="docutils literal notranslate"><span class="pre">test_second</span></code> will be executed before <code class="docutils literal notranslate"><span class="pre">test_first</span></code>,
regardless of the ordinal markers.</p>
</div>
<div class="section" id="several-relationships-for-the-same-marker">
<h3>Several relationships for the same marker<a class="headerlink" href="#several-relationships-for-the-same-marker" title="Permalink to this headline">¶</a></h3>
<p>If you need to order a certain test relative to more than one other test, you
can add more than one test name to the <code class="docutils literal notranslate"><span class="pre">before</span></code> or <code class="docutils literal notranslate"><span class="pre">after</span></code> marker
attributes by using a list or tuple of test names:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">order</span><span class="p">(</span><span class="n">after</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;test_second&quot;</span><span class="p">,</span> <span class="s2">&quot;other_module.test_other&quot;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">test_first</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>

<span class="k">def</span> <span class="nf">test_second</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>
</pre></div>
</div>
<p>This will ensure that <code class="docutils literal notranslate"><span class="pre">test_first</span></code> is executed both after <code class="docutils literal notranslate"><span class="pre">test_second</span></code>
and after <code class="docutils literal notranslate"><span class="pre">test_other</span></code> which resides in the module <code class="docutils literal notranslate"><span class="pre">other_module</span></code>.</p>
</div>
</div>
</div>
<div class="section" id="configuration">
<h1>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h1>
<p>There are a few command line options that change the behavior of the
plugin. As with any pytest option, you can add the options to your
<code class="docutils literal notranslate"><span class="pre">pytest.ini</span></code> if you want to have them applied to all tests automatically:</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">pytest</span><span class="p">]</span>
<span class="p">;</span> <span class="n">always</span> <span class="n">order</span> <span class="n">tests</span> <span class="k">with</span> <span class="n">dependency</span> <span class="n">markers</span>
<span class="n">addopts</span> <span class="o">=</span> <span class="o">--</span><span class="n">order</span><span class="o">-</span><span class="n">dependencies</span>
</pre></div>
</div>
<div class="section" id="order-scope">
<span id="id2"></span><h2><code class="docutils literal notranslate"><span class="pre">--order-scope</span></code><a class="headerlink" href="#order-scope" title="Permalink to this headline">¶</a></h2>
<p>By default, tests are ordered per session, e.g. across all modules in the
test run. Sometimes, you want to order tests per module or per test class
instead. Consider that you have a growing number of test modules that you
want to run simultaneously, with tests ordered per module. Per default you
would need to make sure that the order numbers increases globally, if you
want to run the test modules consecutively and order the test per module.</p>
<p>If you use the option <code class="docutils literal notranslate"><span class="pre">--order-scope=module</span></code>, there is no need for this.
You can enumerate your tests starting with 0 or 1 in each module, and the tests
will only be ordered inside each module. Using <code class="docutils literal notranslate"><span class="pre">--order-scope=class</span></code>
additionally considers test classes–each test class is considered
separately for ordering the tests. If a module has both test classes and
separate test functions, these test functions are handled separately from the
test classes. If a module has no test classes, the effect is the same as
if using <code class="docutils literal notranslate"><span class="pre">--order-scope=module</span></code>.</p>
<p>For example consider two test modules:</p>
<p><strong>tests/test_module1.py</strong>:</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">order</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test2</span><span class="p">():</span>
    <span class="k">pass</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">order</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test1</span><span class="p">():</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p><strong>tests/test_module2.py</strong>:</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">order</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test2</span><span class="p">():</span>
    <span class="k">pass</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">order</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test1</span><span class="p">():</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>Here is what you get using session and module-scoped sorting:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pytest tests -vv
============================= test session starts ==============================
...

tests/test_module1.py:9: test1 PASSED
tests/test_module2.py:9: test1 PASSED
tests/test_module1.py:5: test2 PASSED
tests/test_module2.py:5: test2 PASSED
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pytest tests -vv --order-scope=module
============================= test session starts ==============================
...

tests/test_module1.py:9: test1 PASSED
tests/test_module1.py:5: test2 PASSED
tests/test_module2.py:9: test1 PASSED
tests/test_module2.py:5: test2 PASSED
</pre></div>
</div>
</div>
<div class="section" id="order-scope-level">
<h2><code class="docutils literal notranslate"><span class="pre">--order-scope-level</span></code><a class="headerlink" href="#order-scope-level" title="Permalink to this headline">¶</a></h2>
<p>This is an alternative option to define the order scope. It defines the
directory level which is used as the order scope, counting from the root
directory. The resulting scope is between the session and module
scopes defined via <code class="docutils literal notranslate"><span class="pre">--order-scope</span></code>, where <code class="docutils literal notranslate"><span class="pre">--order-scope-level=0</span></code> is the
same as session scope, while setting the level to the number of test
directory levels would result in module scope.</p>
<p>Consider the following directory structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">order_scope_level</span>
  <span class="n">feature1</span>
    <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
    <span class="n">test_a</span><span class="o">.</span><span class="n">py</span>
    <span class="n">test_b</span><span class="o">.</span><span class="n">py</span>
  <span class="n">feature2</span>
    <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
    <span class="n">test_a</span><span class="o">.</span><span class="n">py</span>
    <span class="n">test_b</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>with the test contents:</p>
<p><strong>test_a.py</strong>:</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">order</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_four</span><span class="p">():</span>
    <span class="k">pass</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">order</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_three</span><span class="p">():</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p><strong>test_b.py</strong>:</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">order</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_two</span><span class="p">():</span>
    <span class="k">pass</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">order</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_one</span><span class="p">():</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>The idea here is to test each feature separately, while ordering the tests
across the test modules for each feature.</p>
<p>If we use session scope, we get:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pytest -v order_scope_level
============================= test session starts ==============================
...

order_scope_level/feature1/test_a.py::test_one PASSED
order_scope_level/feature2/test_a.py::test_one PASSED
order_scope_level/feature1/test_a.py::test_two PASSED
order_scope_level/feature2/test_a.py::test_two PASSED
order_scope_level/feature1/test_b.py::test_three PASSED
order_scope_level/feature2/test_b.py::test_three PASSED
order_scope_level/feature1/test_b.py::test_four PASSED
order_scope_level/feature2/test_b.py::test_four PASSED
</pre></div>
</div>
<p>which mixes the features.</p>
<p>Using module scope instead separates the features, but does not order the
modules as wanted:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pytest -v --order-scope=module order_scope_level
============================= test session starts ==============================
...

order_scope_level/feature1/test_a.py::test_three PASSED
order_scope_level/feature1/test_a.py::test_four PASSED
order_scope_level/feature1/test_b.py::test_one PASSED
order_scope_level/feature1/test_b.py::test_two PASSED
order_scope_level/feature2/test_a.py::test_three PASSED
order_scope_level/feature2/test_a.py::test_four PASSED
order_scope_level/feature2/test_b.py::test_one PASSED
order_scope_level/feature2/test_b.py::test_two PASSED
</pre></div>
</div>
<p>To get the wanted behavior, we can use <code class="docutils literal notranslate"><span class="pre">--order-scope-level=2</span></code>, which keeps
the first two directory levels:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pytest tests -v --order-scope-level=2 order_scope_level
============================= test session starts ==============================
...

order_scope_level/feature1/test_b.py::test_one PASSED
order_scope_level/feature1/test_b.py::test_two PASSED
order_scope_level/feature1/test_a.py::test_three PASSED
order_scope_level/feature1/test_a.py::test_four PASSED
order_scope_level/feature2/test_b.py::test_one PASSED
order_scope_level/feature2/test_b.py::test_two PASSED
order_scope_level/feature2/test_a.py::test_three PASSED
order_scope_level/feature2/test_a.py::test_four PASSED
</pre></div>
</div>
<p>Note that using a level of 0 or 1 would cause the same result as session
scope in this example, and any level greater than 2 would emulate module scope.</p>
</div>
<div class="section" id="order-group-scope">
<h2><code class="docutils literal notranslate"><span class="pre">--order-group-scope</span></code><a class="headerlink" href="#order-group-scope" title="Permalink to this headline">¶</a></h2>
<p>This option is also related to the order scope. It defines the scope inside
which tests may be reordered. Consider you have several test modules which
you want to order, but you don’t want to mix the tests of several modules
because the module setup is costly. In this case you can set the group order
scope to “module”, meaning that first the tests are ordered inside each
module (the same as with the module order scope), but afterwards the modules
themselves are sorted without changing the order inside each module.</p>
<p>Consider these two test modules:</p>
<p><strong>tests/test_module1.py</strong>:</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">order</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test1</span><span class="p">():</span>
    <span class="k">pass</span>

<span class="k">def</span> <span class="nf">test2</span><span class="p">():</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p><strong>tests/test_module2.py</strong>:</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">order</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test1</span><span class="p">():</span>
    <span class="k">pass</span>

<span class="k">def</span> <span class="nf">test2</span><span class="p">():</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>Here is what you get using different scopes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pytest tests -vv
============================= test session starts ==============================
...

tests/test_module2.py:9: test1 PASSED
tests/test_module1.py:9: test1 PASSED
tests/test_module1.py:5: test2 PASSED
tests/test_module2.py:5: test2 PASSED
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pytest tests -vv --order-scope=module
============================= test session starts ==============================
...

tests/test_module1.py:9: test1 PASSED
tests/test_module1.py:5: test2 PASSED
tests/test_module2.py:9: test1 PASSED
tests/test_module2.py:5: test2 PASSED
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pytest tests -vv --order-group-scope=module
============================= test session starts ==============================
...

tests/test_module2.py:9: test1 PASSED
tests/test_module2.py:5: test2 PASSED
tests/test_module1.py:9: test1 PASSED
tests/test_module1.py:5: test2 PASSED
</pre></div>
</div>
<p>The ordering of the module groups is done based on the lowest
non-negative order number present in the module (e.g. the order number of
the first test). If only negative numbers are present, the highest negative
number (e.g. the number of the last test) is used, and these modules will be
ordered at the end. Modules without order numbers will be sorted between
modules with a non-negative order number and modules with a negative order
number, the same way tests are sorted inside a module.</p>
<p>The group order scope defaults to the order scope. In this case the tests are
ordered the same way as without the group order scope. The setting takes effect
only if the scope is less than the order scope, e.g. there are three
possibilities:</p>
<ul class="simple">
<li>order scope “session”, order group scope “module” - this is shown in the
example above: first tests in each module are ordered, afterwards the modules</li>
<li>order scope “module”, order group scope “class” - first orders tests inside
each class, then the classes inside each module</li>
<li>order scope “session”, order group scope “class” - first orders tests inside
each class, then the classes inside each module, and finally the modules
relatively to each other</li>
</ul>
<p>This option will also work with relative markers.</p>
<p>Here is a similar example using relative markers:</p>
<p><strong>tests/test_module1.py</strong>:</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">order</span><span class="p">(</span><span class="n">after</span><span class="o">=</span><span class="s2">&quot;test_module2.test1&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test1</span><span class="p">():</span>
    <span class="k">pass</span>

<span class="k">def</span> <span class="nf">test2</span><span class="p">():</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p><strong>tests/test_module2.py</strong>:</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>

<span class="k">def</span> <span class="nf">test1</span><span class="p">():</span>
    <span class="k">pass</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">order</span><span class="p">(</span><span class="n">before</span><span class="o">=</span><span class="s2">&quot;test1&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test2</span><span class="p">():</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>Here is what you get using different scopes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pytest tests -vv
============================= test session starts ==============================
...

tests/test_module1.py:5: test2 PASSED
tests/test_module2.py:9: test1 PASSED
tests/test_module2.py:5: test2 PASSED
tests/test_module1.py:9: test1 PASSED
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pytest tests -vv --order-group-scope=module
============================= test session starts ==============================
...

tests/test_module2.py:9: test1 PASSED
tests/test_module2.py:5: test2 PASSED
tests/test_module1.py:9: test1 PASSED
tests/test_module1.py:5: test2 PASSED
</pre></div>
</div>
<p>You can see that in the second run the second test module is run before the
first because of the dependency, but the tests inside each module remain in
the same order as before. Note that using module scope as in the example
above doesn’t make sense here due to the dependencies between modules.</p>
<p>This will also work with dependency markers if using the
<a class="reference internal" href="#order-dependencies"><span class="std std-ref">--order-dependencies</span></a> option.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This option will not work together well with the sparse ordering option.</p>
</div>
</div>
<div class="section" id="indulgent-ordering">
<span id="id3"></span><h2><code class="docutils literal notranslate"><span class="pre">--indulgent-ordering</span></code><a class="headerlink" href="#indulgent-ordering" title="Permalink to this headline">¶</a></h2>
<p>You may sometimes find that you want to suggest an ordering of tests, while
allowing it to be overridden for good reason. For example, if you run your test
suite in parallel and have a number of tests which are particularly slow, it
might be desirable to start those tests running first, in order to optimize
your completion time. You can use the <code class="docutils literal notranslate"><span class="pre">pytest-order</span></code> plugin to inform pytest
of this.</p>
<p>Now suppose you also want to prioritize tests which failed during the
previous run, by using the <code class="docutils literal notranslate"><span class="pre">--failed-first</span></code> option. By default,
pytest-order will override the <code class="docutils literal notranslate"><span class="pre">--failed-first</span></code> order, but by adding the
<code class="docutils literal notranslate"><span class="pre">--indulgent-ordering</span></code> option, you can ask pytest to run the sort from
pytest-order <em>before</em> the sort from <code class="docutils literal notranslate"><span class="pre">--failed-first</span></code>, allowing the failed
tests to be sorted to the front (note that in pytest versions from 6.0 on,
this seems not to be needed anymore, at least in this specific case).</p>
</div>
<div class="section" id="sparse-ordering">
<span id="id4"></span><h2><code class="docutils literal notranslate"><span class="pre">--sparse-ordering</span></code><a class="headerlink" href="#sparse-ordering" title="Permalink to this headline">¶</a></h2>
<p>Ordering tests by ordinals where some numbers are missing by default behaves
the same as if the the ordinals are consecutive. For example, these tests:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">order</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_two</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>

<span class="k">def</span> <span class="nf">test_three</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>

<span class="k">def</span> <span class="nf">test_four</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">order</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_one</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>
</pre></div>
</div>
<p>are executed in the same order as:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">order</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_two</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>

<span class="k">def</span> <span class="nf">test_three</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>

<span class="k">def</span> <span class="nf">test_four</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">order</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_one</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>
</pre></div>
</div>
<p>e.g. you get:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pytest tests -vv
============================= test session starts ==============================
...
test_module.py:13: test_one PASSED
test_module.py:3: test_two PASSED
test_module.py:6: test_three PASSED
test_module.py:9: test_four PASSED
</pre></div>
</div>
<p>The gaps between numbers, and the fact that the starting number is not 0,
are ignored. This is consistent with the current behavior of
<code class="docutils literal notranslate"><span class="pre">pytest-ordering</span></code>.</p>
<p>If you use the <code class="docutils literal notranslate"><span class="pre">--sparse-ordering</span></code> option, the behavior will change:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pytest tests -vv --sparse-ordering
============================= test session starts ==============================
...
test_module.py:6: test_three PASSED
test_module.py:13: test_one PASSED
test_module.py:9: test_four PASSED
test_module.py:3: test_two PASSED
</pre></div>
</div>
<p>Now all missing numbers (starting with 0) are filled with unordered tests, as
long as unordered tests are left. In the shown example, <code class="docutils literal notranslate"><span class="pre">test_three</span></code>
is filled in for the missing number 0, and <code class="docutils literal notranslate"><span class="pre">test_four</span></code> is filled in for the
missing number 2. This will also work for tests with negative order numbers
(or the respective names). The missing ordinals are filled with unordered
tests first from the start, then from the end if there are negative numbers,
and the rest will be in between (e.g. between positive and negative numbers),
as it is without this option.</p>
</div>
<div class="section" id="order-dependencies">
<span id="id5"></span><h2><code class="docutils literal notranslate"><span class="pre">--order-dependencies</span></code><a class="headerlink" href="#order-dependencies" title="Permalink to this headline">¶</a></h2>
<p>This defines the behavior if the <code class="docutils literal notranslate"><span class="pre">pytest-dependency</span></code> plugin is used.
By default, <code class="docutils literal notranslate"><span class="pre">dependency</span></code> marks are only considered if they coexist with an
<code class="docutils literal notranslate"><span class="pre">order</span></code> mark. In this case it is checked if the ordering would break the
dependency, and is ignored if this is the case. Consider the following:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>

<span class="k">def</span> <span class="nf">test_a</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">dependency</span><span class="p">(</span><span class="n">depends</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;test_a&quot;</span><span class="p">])</span>
<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">order</span><span class="p">(</span><span class="s2">&quot;first&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_b</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>
</pre></div>
</div>
<p>In this case, the ordering would break the dependency and is therefore
ignored. This behavior is independent of the option. Now consider the
following tests:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">dependency</span><span class="p">(</span><span class="n">depends</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;test_b&quot;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">test_a</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">dependency</span>
<span class="k">def</span> <span class="nf">test_b</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>
</pre></div>
</div>
<p>By default, <code class="docutils literal notranslate"><span class="pre">test_a</span></code> is not run, because it depends on <code class="docutils literal notranslate"><span class="pre">test_b</span></code>, which
is only run after <code class="docutils literal notranslate"><span class="pre">test_b</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pytest tests -vv
============================= test session starts ==============================
...
test_dep.py::test_a SKIPPED
test_dep.py::test_b PASSED
</pre></div>
</div>
<p>If you use <code class="docutils literal notranslate"><span class="pre">--order-dependencies</span></code>, this will change–the tests will now be
reordered according to the dependency and both run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pytest tests -vv --order-dependencies
============================= test session starts ==============================
...
test_dep.py::test_b PASSED
test_dep.py::test_a PASSED
</pre></div>
</div>
<p>Note that a similar feature may be added to <code class="docutils literal notranslate"><span class="pre">pytest-dependency</span></code> -
if this is done, this option will not be needed, but for the time being you
can use both plugins together to get this behavior.
Note that <code class="docutils literal notranslate"><span class="pre">pytest-order</span></code> does not replace <code class="docutils literal notranslate"><span class="pre">pytest-dependency</span></code>–it just
adds ordering to the existing functionality if needed.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This feature is considered experimental. It may not handle all cases of
defined dependencies. Please write an issue if you find any problems.</p>
</div>
</div>
</div>
<div class="section" id="using-pytest-order-with-other-pytest-plugins">
<h1>Using pytest-order with other pytest plugins<a class="headerlink" href="#using-pytest-order-with-other-pytest-plugins" title="Permalink to this headline">¶</a></h1>
<div class="section" id="relationship-with-pytest-dependency">
<h2>Relationship with pytest-dependency<a class="headerlink" href="#relationship-with-pytest-dependency" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference external" href="https://pypi.org/project/pytest-dependency/">pytest-dependency</a>
plugin also manages dependencies between tests (skips tests that depend
on skipped or failed tests), but currently doesn’t do any ordering. If you
want to execute the tests in a specific order to each other, you can use
<code class="docutils literal notranslate"><span class="pre">pytest-order</span></code>. If you want to skip or xfail tests dependent on other
tests you can use <code class="docutils literal notranslate"><span class="pre">pytest-dependency</span></code>. If you want to have both behaviors
combined, you can use both plugins together with the
option <a class="reference internal" href="#order-dependencies"><span class="std std-ref">--order-dependencies</span></a>, described above.</p>
</div>
<div class="section" id="usage-with-other-ordering-plugins">
<h2>Usage with other ordering plugins<a class="headerlink" href="#usage-with-other-ordering-plugins" title="Permalink to this headline">¶</a></h2>
<p>There is a number of other pytest plugins that change the order in which tests
are executed, the most widely known probably being
<a class="reference external" href="https://pypi.org/project/pytest-randomly/">pytest-randomly</a>, which
executes tests in a random order to avoid unknown test dependencies.
<code class="docutils literal notranslate"><span class="pre">pytest-order</span></code> should still work with these as long as it is executed
<em>after</em> the other plugins (which it should by default, except if you use
the option <a class="reference internal" href="#indulgent-ordering"><span class="std std-ref">--indulgent-ordering</span></a>).
The marked tests still shall be ordered correctly, but the order of the
unordered tests will change, depending on the order the tests have been
after these other plugins have reordered them.
For example, if you have installed <code class="docutils literal notranslate"><span class="pre">pytest-randomly</span></code>, and run the
following tests:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">order</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_second</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>

<span class="k">def</span> <span class="nf">test_third</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>

<span class="k">def</span> <span class="nf">test_fourth</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">order</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_first</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>
</pre></div>
</div>
<p>the output could either be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">test_randomly</span><span class="o">.</span><span class="n">py</span><span class="p">::</span><span class="n">test_first</span> <span class="n">PASSED</span>
<span class="n">test_randomly</span><span class="o">.</span><span class="n">py</span><span class="p">::</span><span class="n">test_second</span> <span class="n">PASSED</span>
<span class="n">test_randomly</span><span class="o">.</span><span class="n">py</span><span class="p">::</span><span class="n">test_third</span> <span class="n">PASSED</span>
<span class="n">test_randomly</span><span class="o">.</span><span class="n">py</span><span class="p">::</span><span class="n">test_fourth</span> <span class="n">PASSED</span>
</pre></div>
</div>
<p>or:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">test_randomly</span><span class="o">.</span><span class="n">py</span><span class="p">::</span><span class="n">test_first</span> <span class="n">PASSED</span>
<span class="n">test_randomly</span><span class="o">.</span><span class="n">py</span><span class="p">::</span><span class="n">test_second</span> <span class="n">PASSED</span>
<span class="n">test_randomly</span><span class="o">.</span><span class="n">py</span><span class="p">::</span><span class="n">test_fourth</span> <span class="n">PASSED</span>
<span class="n">test_randomly</span><span class="o">.</span><span class="n">py</span><span class="p">::</span><span class="n">test_third</span> <span class="n">PASSED</span>
</pre></div>
</div>
<p>The same is true for relative ordering. The tests will be correctly ordered
before and after the tests as configured, but all other tests will be in an
arbitrary order.</p>
<p>Note that it does not make much sense to use ordering plugins together that
have a similar goal as <code class="docutils literal notranslate"><span class="pre">pytest-order</span></code>, as for example <code class="docutils literal notranslate"><span class="pre">pytest-ordering</span></code>.
As mentioned, both plugins can co-exist without problems due to the
different marker names, but using markers of both plugins in the same test
run is not recommended. One plugin may partially revert the effects of the
other plugin in unpredictable ways. The same is true for other plugins that
define the test order.</p>
</div>
<div class="section" id="usage-with-pytest-xdist">
<h2>Usage with pytest-xdist<a class="headerlink" href="#usage-with-pytest-xdist" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference external" href="https://pypi.org/project/pytest-xdist/">pytest-xdist</a> plugin
schedules tests unordered, and the order configured by <code class="docutils literal notranslate"><span class="pre">pytest-order</span></code>
will normally not be preserved. But if we use the <code class="docutils literal notranslate"><span class="pre">--dist=loadfile</span></code>
option, provided by <code class="docutils literal notranslate"><span class="pre">xdist</span></code>, all tests from one file will be run in the
same thread. So, to make the two plugins work together, we have to put
each group of dependent tests in one file, and call pytest with
<code class="docutils literal notranslate"><span class="pre">--dist=loadfile</span></code> (this is taken from
<a class="reference external" href="https://github.com/ftobia/pytest-ordering/issues/36">this issue</a>).</p>
<div class="toctree-wrapper compound">
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Introduction</a><ul>
<li><a class="reference internal" href="#relationship-with-pytest-ordering">Relationship with pytest-ordering</a></li>
<li><a class="reference internal" href="#supported-python-and-pytest-versions">Supported Python and pytest versions</a></li>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#examples">Examples</a></li>
<li><a class="reference internal" href="#quickstart">Quickstart</a></li>
</ul>
</li>
<li><a class="reference internal" href="#usage">Usage</a><ul>
<li><a class="reference internal" href="#ordering-by-numbers">Ordering by numbers</a><ul>
<li><a class="reference internal" href="#order-by-index">Order by index</a></li>
<li><a class="reference internal" href="#order-using-ordinals">Order using ordinals</a></li>
<li><a class="reference internal" href="#markers-on-class-level">Markers on class level</a></li>
<li><a class="reference internal" href="#handling-of-unordered-tests">Handling of unordered tests</a></li>
</ul>
</li>
<li><a class="reference internal" href="#order-relative-to-other-tests">Order relative to other tests</a><ul>
<li><a class="reference internal" href="#referencing-of-tests-in-other-classes-or-modules">Referencing of tests in other classes or modules</a></li>
<li><a class="reference internal" href="#id1">Markers on class level</a></li>
<li><a class="reference internal" href="#combination-of-absolute-and-relative-ordering">Combination of absolute and relative ordering</a></li>
<li><a class="reference internal" href="#several-relationships-for-the-same-marker">Several relationships for the same marker</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#configuration">Configuration</a><ul>
<li><a class="reference internal" href="#order-scope"><code class="docutils literal notranslate"><span class="pre">--order-scope</span></code></a></li>
<li><a class="reference internal" href="#order-scope-level"><code class="docutils literal notranslate"><span class="pre">--order-scope-level</span></code></a></li>
<li><a class="reference internal" href="#order-group-scope"><code class="docutils literal notranslate"><span class="pre">--order-group-scope</span></code></a></li>
<li><a class="reference internal" href="#indulgent-ordering"><code class="docutils literal notranslate"><span class="pre">--indulgent-ordering</span></code></a></li>
<li><a class="reference internal" href="#sparse-ordering"><code class="docutils literal notranslate"><span class="pre">--sparse-ordering</span></code></a></li>
<li><a class="reference internal" href="#order-dependencies"><code class="docutils literal notranslate"><span class="pre">--order-dependencies</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#using-pytest-order-with-other-pytest-plugins">Using pytest-order with other pytest plugins</a><ul>
<li><a class="reference internal" href="#relationship-with-pytest-dependency">Relationship with pytest-dependency</a></li>
<li><a class="reference internal" href="#usage-with-other-ordering-plugins">Usage with other ordering plugins</a></li>
<li><a class="reference internal" href="#usage-with-pytest-xdist">Usage with pytest-xdist</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/index.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="nav-item nav-item-0"><a href="#">pytest-order 1.0.dev0 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    </div>
  </body>
</html>